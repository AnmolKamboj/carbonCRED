{% extends "layouts/base.html" %}

{% block title %}Log Travel{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow">
    <h2 class="text-2xl font-bold mb-4">Travel Log</h2>

    <form method="POST" action="{{ url_for('employee_log_trip') }}" enctype="multipart/form-data">

        <!-- Select Trip Type -->
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">Where are you traveling today?</label>
            <select id="trip-type" name="trip_type" onchange="toggleAddressInputs()" class="w-full px-3 py-2 border rounded" required>
                <option value="">Select an option</option>
                <option value="home">Home and Work Locations</option>
                <option value="custom">Custom Trip</option>
            </select>
        </div>

        <!-- Custom Start/End Address Inputs (Hidden initially) -->
        <div id="custom-addresses" style="display: none;">
            <div class="mb-4">
                <label class="block text-gray-700 mb-2">Start Address</label>
                <input id="start-address" type="text" name="start_address" placeholder="Enter Start Address" class="w-full px-3 py-2 border rounded">
            </div>

            <div class="mb-4">
                <label class="block text-gray-700 mb-2">Destination Address</label>
                <input id="end-address" type="text" name="end_address" placeholder="Enter Destination Address" class="w-full px-3 py-2 border rounded">
            </div>
        </div>

        <!-- Trip Date -->
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">Trip Date</label>
            <input type="date" name="date" required class="w-full px-3 py-2 border rounded">
        </div>

        <!-- Upload Image Proof -->
        <div class="mb-4">
            <label class="block text-gray-700 mb-2">Upload Image Proof</label>
            <input type="file" name="image" accept="image/*" class="w-full" required>
        </div>

        <button type="submit" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">
            Submit Travel Log
        </button>

    </form>

    <script>
        function toggleAddressInputs() {
            const tripType = document.getElementById('trip-type').value;
            const customAddresses = document.getElementById('custom-addresses');
        
            if (tripType === 'custom') {
                customAddresses.style.display = 'block';
            } else {
                customAddresses.style.display = 'none';
            }
        }
    </script>
</div>
{% endblock %}
